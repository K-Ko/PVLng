!function(t){"use strict";t.fn.rowReordering=function(e){function i(e){e.fnSettings().oFeatures.bProcessing&&t(".dataTables_processing").css("visibility","visible")}function n(e){e.fnSettings().oFeatures.bProcessing&&t(".dataTables_processing").css("visibility","hidden")}function o(t,e,i,n,o){e.sortable("cancel"),n<=i.iLogLevel&&(void 0!=o?i.fnAlert(o,""):i.fnAlert("Row cannot be moved","")),i.fnEndProcessingMode(t)}function r(e,i,n){var o,r=t("#"+n,e),s=e.fnGetData(r[0],c.iIndexColumn),a=-1,u=r.prev(i);if(u.length>0)a=parseInt(e.fnGetData(u[0],c.iIndexColumn)),s>a&&(a+=1);else{var d=r.next(i);d.length>0&&(a=parseInt(e.fnGetData(d[0],c.iIndexColumn)),a>s&&(a-=1))}return o=s>a?"back":"forward",{sDirection:o,iCurrentPosition:s,iNewPosition:a}}function s(e,i,n,o,r,s,a){var u=n,d=o;"back"==r&&(u=o,d=n),t(e.fnGetNodes()).each(function(){if(""==a||t(this).attr("data-group")==a){var i=this,n=parseInt(e.fnGetData(i,c.iIndexColumn));n>=u&&d>=n&&(i.id==s?e.fnUpdate(o,e.fnGetPosition(i),c.iIndexColumn,!1):"back"==r?e.fnUpdate(n+1,e.fnGetPosition(i),c.iIndexColumn,!1):e.fnUpdate(n-1,e.fnGetPosition(i),c.iIndexColumn,!1))}});var f=e.fnSettings();if(f.oFeatures.bServerSide===!1){var l=f._iDisplayStart;f.oApi._fnReDraw(f),f._iDisplayStart=l,f.oApi._fnCalculateEnd(f)}f.oApi._fnDraw(f)}function a(t){alert(t)}var u={iIndexColumn:0,iStartPosition:1,sURL:null,sRequestType:"POST",iGroupingLevel:0,fnAlert:a,fnSuccess:jQuery.noop,iLogLevel:1,sDataGroupAttribute:"data-group",fnStartProcessingMode:i,fnEndProcessingMode:n,fnUpdateAjaxRequest:jQuery.noop},c=t.extend(u,e),d=function(e,i){var n=i.children(),o=i.clone();return o.children().each(function(e){t(this).width(n.eq(e).width())}),o};return this.each(function(){var e=t(this).dataTable();t("tbody",e).disableSelection().sortable({cursor:"ns-resize",helper:d,placeholder:"ui-state-highlight",axis:"y",distance:5,update:function(i,n){var a=e,u=t(this),d="tbody tr",f="";if(c.bGroupingUsed){if(f=t(n.item).attr(c.sDataGroupAttribute),null==f||void 0==f)return void o(a,u,c,3,"Grouping row cannot be moved");d="tbody tr["+c.sDataGroupAttribute+" ='"+f+"']"}var l=r(a,d,n.item.context.id);if(-1==l.iNewPosition)return void o(a,u,c,2);if(null!=c.sURL){c.fnStartProcessingMode(a);var p={url:c.sURL,type:c.sRequestType,data:{id:n.item.context.id,fromPosition:l.iCurrentPosition,toPosition:l.iNewPosition,direction:l.sDirection,group:f},success:function(t){c.fnSuccess(t),s(a,d,l.iCurrentPosition,l.iNewPosition,l.sDirection,n.item.context.id,f),c.fnEndProcessingMode(a)},error:function(t){o(a,u,c,1,t.statusText)}};c.fnUpdateAjaxRequest(p,c,a),t.ajax(p)}else s(a,d,l.iCurrentPosition,l.iNewPosition,l.sDirection,n.item.context.id,f)}})})}}(jQuery);