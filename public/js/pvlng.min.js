var pvlng=new function(){this.verbose=!1,this.cookie=new function(){this.set=function(e,t,n){var o="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}document.cookie=escape(e)+"="+escape(t)+o+"; path=/"},this.get=function(e){for(var t=escape(e)+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return unescape(i.substring(t.length,i.length))}return null},this.remove=function(e){this.set(e,"",-1)}},this.onFinished=new function(){var e=[];this.add=function(){$.each(arguments,function(t,n){e.push(n)})},this.run=function(t){$.each(e,function(e,t){t()})}},this.scroll=function(e){$("html, body").animate({scrollTop:$(e).offset().top-3},"fast")},this.alert=function(e,t){1==arguments.length&&(t=""),$("<div/>").dialog({title:t,resizable:!1,modal:!0,width:480,buttons:{Ok:function(){$(this).dialog("close")}},close:function(){$(this).remove()}}).html(e).find(".ui-dialog-titlebar-close").remove()},this.addClearSearchButton=function(e,t){$("<img />").prop("src","/images/ico/cross-script.png").appendTo($("#"+e+"_filter")).css({marginLeft:"4px",cursor:"pointer"}).prop("title",t).tipTip().click(function(){$(this).parent().find("input").val("").trigger("keyup").focus()})},this.log=function(){this.verbose&&(1==arguments.length?console.log(arguments[0]):($(arguments).each(function(e,t){0==e?console.group(t):"[object Array]"===Object.prototype.toString.call(t)?console.table(t):console.log(t)}),console.groupEnd()))},this.changeDates=function(e){e*=864e5;var t=new Date(Date.parse($("#from").datepicker("getDate"))+e),n=new Date(Date.parse($("#to").datepicker("getDate"))+e);return n>(new Date).getTime()+864e5?void $.pnotify({type:"info",text:"Can't go beyond tomorrow."}):($("#from").datepicker("option","maxDate",n).datepicker("setDate",t),$("#to").datepicker("option","minDate",t).datepicker("setDate",n),void updateOutput())},this.changePreset=function(){var e=$("#preset").val().match(/(\d+)(\w+)/);if(e){var t=new Date($("#from").datepicker("getDate"));switch(e[2]){case"d":t.setDate(1);break;case"w":t.setDate(1);break;case"m":t.setDate(1),t.setMonth(0)}$("#from").datepicker("setDate",t),$("#periodcnt").val(e[1]),$("#period").val(e[2])}else $("#periodcnt").val(1),$("#period").val("");$("#period").trigger("change")},this.profile=function(e){var t=new Date;return e(),new Date-t};var e=[];this.time=function(t){e.push({start:performance.now(),label:t})},this.timeEnd=function(){var t=e.pop();if(t){var n=performance.now()-t.start;return this.verbose&&console.log(t.label+": "+(n/1e3).toFixed(3)+"s"),n}}};$(function(){$.extend({alert:function(e,t){1==arguments.length&&(t=""),$("<div/>").dialog({modal:!0,resizable:!1,title:t,width:480,open:function(){$(".ui-dialog-titlebar-close").hide()},buttons:{Ok:function(){$(this).dialog("close")}},close:function(){$(this).remove()}}).html(e)},confirm:function(e,t,n,o){t||(t="Confirm"),n||(n="Ok"),o||(o="Cancel");var i=$.Deferred(),a={modal:!0,resizable:!1,title:t,width:480,open:function(){$(".ui-dialog-titlebar-close").hide()},buttons:{},close:function(){$(this).remove()}};return a.buttons[n]=function(){return $(this).dialog("close"),i.resolve(!0),!0},a.buttons[o]=function(){return $(this).dialog("close"),i.resolve(!1),!1},$("<div/>").html(e).dialog(a),i.promise()}}),$("#btn-reset").button({icons:{primary:"ui-icon-calendar"},label:"&nbsp;",text:!1}).click(function(e){e.preventDefault();var t=new Date;$("#from").datepicker("option","maxDate",t),$("#to").datepicker("option","minDate",t),$("#from").datepicker("setDate",t),$("#to").datepicker("setDate",t),updateOutput(),chart&&chart.zoomOut()}),$("#preset").change(function(){pvlng.changePreset(),updateOutput()})});