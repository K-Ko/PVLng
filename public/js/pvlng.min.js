var pvlng=new function(){this.cookie=new function(){this.set=function(t,e,i){var o="";if(i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),o="; expires="+n.toGMTString()}document.cookie=escape(t)+"="+escape(e)+o+"; path=/"},this.get=function(t){for(var e=escape(t)+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){for(var n=i[o];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return unescape(n.substring(e.length,n.length))}return null},this.remove=function(t){this.set(t,"",-1)}},this.onFinished=new function(){var t=[];this.add=function(){$.each(arguments,function(e,i){t.push(i)})},this.run=function(){$.each(t,function(t,e){e()})}},this.scroll=function(t){$("html, body").animate({scrollTop:$(t).offset().top-3},"fast")},this.alert=function(t,e){1==arguments.length&&(e=""),$("<div/>").dialog({title:e,resizable:!1,modal:!0,width:480,buttons:{Ok:function(){$(this).dialog("close")}},close:function(){$(this).remove()}}).html(t).find(".ui-dialog-titlebar-close").remove()};this.verbose=!1,this.Overlay=function(){this.show=function(){this.overlay.show()},this.hide=function(){this.overlay.hide(),$("#container").show()},this.overlay=$("<div/>").height($(document).height()).css({display:"none",position:"fixed",top:0,left:0,width:"100%",backgroundColor:"#FFF",opacity:.8,zIndex:1e3}).append($("<img/>").prop("src","/images/loading_dots.gif").css({width:"64px",height:"21px",position:"fixed",top:window.innerHeight/2-15+"px",left:window.innerWidth/2-32+"px"})).appendTo("body")},this.addClearSearchButton=function(t,e){$("<img />").prop("src","/images/ico/cross-script.png").appendTo($("#"+t+"_filter")).css({marginLeft:"4px",cursor:"pointer"}).prop("title",e).tipTip().click(function(){$(this).parent().find("input").val("").trigger("keyup").focus()})},this.log=function(){this.verbose&&(console.timeEnd("Duration"),console.time("Duration"),1==arguments.length?console.log(arguments[0]):($(arguments).each(function(t,e){0==t?console.group(e):"[object Array]"===Object.prototype.toString.call(e)?console.table(e):console.log(e)}),console.groupEnd()))},this.changeDates=function(t){t*=864e5;var e=new Date(Date.parse($("#from").datepicker("getDate"))+t),i=new Date(Date.parse($("#to").datepicker("getDate"))+t);return i>(new Date).getTime()+864e5?void $.pnotify({type:"info",text:"Can't go beyond tomorrow."}):($("#from").datepicker("option","maxDate",i).datepicker("setDate",e),$("#to").datepicker("option","minDate",e).datepicker("setDate",i),void updateOutput())},this.changePreset=function(){var t=$("#preset").val().match(/(\d+)(\w+)/);if(t){var e=new Date($("#from").datepicker("getDate"));switch(t[2]){case"d":e.setDate(1);break;case"w":e.setDate(1);break;case"m":e.setDate(1),e.setMonth(0)}$("#from").datepicker("setDate",e),$("#periodcnt").val(t[1]),$("#period").val(t[2])}else $("#periodcnt").val(1),$("#period").val("");$("#period").trigger("change")}};$(function(){$.extend({alert:function(t,e){1==arguments.length&&(e=""),$("<div/>").dialog({modal:!0,resizable:!1,title:e,width:480,open:function(){$(".ui-dialog-titlebar-close").hide()},buttons:{Ok:function(){$(this).dialog("close")}},close:function(){$(this).remove()}}).html(t)},confirm:function(t,e,i,o){e||(e="Confirm"),i||(i="Ok"),o||(o="Cancel");var n=$.Deferred(),a={modal:!0,resizable:!1,title:e,width:480,open:function(){$(".ui-dialog-titlebar-close").hide()},buttons:{},close:function(){$(this).remove()}};return a.buttons[i]=function(){return $(this).dialog("close"),n.resolve(!0),!0},a.buttons[o]=function(){return $(this).dialog("close"),n.resolve(!1),!1},$("<div/>").html(t).dialog(a),n.promise()}}),$("#btn-reset").button({icons:{primary:"ui-icon-calendar"},label:"&nbsp;",text:!1}).click(function(t){t.preventDefault();var e=new Date;$("#from").datepicker("option","maxDate",e),$("#to").datepicker("option","minDate",e),$("#from").datepicker("setDate",e),$("#to").datepicker("setDate",e),updateOutput(),chart&&chart.zoomOut()}),$("#preset").change(function(){pvlng.changePreset(),updateOutput()})});